var t,e=t||(t={});function n(t){t.preventDefault(),t.returnValue=""}function a(){let t=[];return{get length(){return t.length},push:e=>(t.push(e),function(){t=t.filter(t=>t!==e)}),call(e){t.forEach(t=>t&&t(e))}}}function i(){return Math.random().toString(36).substr(2,8)}function l({pathname:t="/",search:e="",hash:n=""}){return t+e+n}function r(t){let e={};if(t){var n=t.indexOf("#");0<=n&&(e.hash=t.substr(n),t=t.substr(0,n)),0<=(n=t.indexOf("?"))&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function o({window:e=document.defaultView}={}){function o(){let{pathname:t,search:n,hash:a}=e.location,i=h.state||{};return[i.idx,{pathname:t,search:n,hash:a,state:i.usr||null,key:i.key||"default"}]}function c(t){return"string"==typeof t?t:l(t)}function s(t,e=null){return Object.assign(Object.assign(Object.assign({},y),"string"==typeof t?r(t):t),{state:e,key:i()})}function u(t){p=t,[d,y]=o(),b.call({action:p,location:y})}function f(t){h.go(t)}let h=e.history,g=null;e.addEventListener("popstate",(function(){if(g)k.call(g),g=null;else{let e=t.Pop,[n,a]=o();if(k.length){if(null!=n){let t=d-n;t&&(g={action:e,location:a,retry(){f(-1*t)}},f(t))}}else u(e)}}));let p=t.Pop,[d,y]=o(),b=a(),k=a();return null==d&&(d=0,h.replaceState(Object.assign(Object.assign({},h.state),{idx:d}),"")),{get action(){return p},get location(){return y},createHref:c,push:function n(a,i){let l=t.Push,r=s(a,i);if(!k.length||(k.call({action:l,location:r,retry:function(){n(a,i)}}),0)){let[t,n]=[{usr:r.state,key:r.key,idx:d+1},c(r)];try{h.pushState(t,"",n)}catch(o){e.location.assign(n)}u(l)}},replace:function e(n,a){let i=t.Replace,l=s(n,a);if(!k.length||(k.call({action:i,location:l,retry:function(){e(n,a)}}),0)){let[t,e]=[{usr:l.state,key:l.key,idx:d},c(l)];h.replaceState(t,"",e),u(i)}},go:f,back(){f(-1)},forward(){f(1)},listen:t=>b.push(t),block(t){let a=k.push(t);return 1===k.length&&e.addEventListener("beforeunload",n),function(){a(),k.length||e.removeEventListener("beforeunload",n)}}}}function c({window:e=document.defaultView}={}){function o(){let{pathname:t="/",search:n="",hash:a=""}=r(e.location.hash.substr(1)),i=g.state||{};return[i.idx,{pathname:t,search:n,hash:a,state:i.usr||null,key:i.key||"default"}]}function c(){if(p)m.call(p),p=null;else{let e=t.Pop,[n,a]=o();if(m.length){if(null!=n){let t=y-n;t&&(p={action:e,location:a,retry(){h(-1*t)}},h(t))}}else f(e)}}function s(t){var n=document.querySelector("base"),a="";return n&&n.getAttribute("href")&&(a=-1===(a=(n=e.location.href).indexOf("#"))?n:n.slice(0,a)),(n=a)+"#"+("string"==typeof t?t:l(t))}function u(t,e=null){return Object.assign(Object.assign(Object.assign({},b),"string"==typeof t?r(t):t),{state:e,key:i()})}function f(t){d=t,[y,b]=o(),k.call({action:d,location:b})}function h(t){g.go(t)}let g=e.history,p=null;e.addEventListener("popstate",c),e.addEventListener("hashchange",()=>{let[,t]=o();l(t)!==l(b)&&c()});let d=t.Pop,[y,b]=o(),k=a(),m=a();return null==y&&(y=0,g.replaceState(Object.assign(Object.assign({},g.state),{idx:y}),"")),{get action(){return d},get location(){return b},createHref:s,push:function n(a,i){let l=t.Push,r=u(a,i);if(!m.length||(m.call({action:l,location:r,retry:function(){n(a,i)}}),0)){let[t,n]=[{usr:r.state,key:r.key,idx:y+1},s(r)];try{g.pushState(t,"",n)}catch(o){e.location.assign(n)}f(l)}},replace:function e(n,a){let i=t.Replace,l=u(n,a);if(!m.length||(m.call({action:i,location:l,retry:function(){e(n,a)}}),0)){let[t,e]=[{usr:l.state,key:l.key,idx:y},s(l)];g.replaceState(t,"",e),f(i)}},go:h,back(){h(-1)},forward(){h(1)},listen:t=>k.push(t),block(t){let a=m.push(t);return 1===m.length&&e.addEventListener("beforeunload",n),function(){a(),m.length||e.removeEventListener("beforeunload",n)}}}}function s({initialEntries:e=["/"],initialIndex:n=0}={}){function o(t,e=null){return Object.assign(Object.assign(Object.assign({},p),"string"==typeof t?r(t):t),{state:e,key:i()})}function c(t,e,n){return!y.length||(y.call({action:t,location:e,retry:n}),!1)}function s(t,e){g=t,p=e,d.call({action:g,location:p})}function u(e){let n=Math.min(Math.max(h+e,0),f.length-1),a=t.Pop,i=f[n];c(a,i,(function(){u(e)}))&&(h=n,s(a,i))}let f=e.map(t=>Object.assign({pathname:"/",search:"",hash:"",state:null,key:i()},"string"==typeof t?r(t):t)),h=Math.min(Math.max(n,0),f.length-1),g=t.Pop,p=f[h],d=a(),y=a();return{get index(){return h},get action(){return g},get location(){return p},createHref:function(t){return"string"==typeof t?t:l(t)},push:function e(n,a){let i=t.Push,l=o(n,a);c(i,l,(function(){e(n,a)}))&&(h+=1,f.splice(h,f.length,l),s(i,l))},replace:function e(n,a){let i=t.Replace,l=o(n,a);c(i,l,(function(){e(n,a)}))&&(f[h]=l,s(i,l))},go:u,back(){u(-1)},forward(){u(1)},listen:t=>d.push(t),block:t=>y.push(t)}}e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE";export{t as Action,o as createBrowserHistory,c as createHashHistory,s as createMemoryHistory,l as createPath,r as parsePath};
//# sourceMappingURL=history.production.min.js.map
