{"ast":null,"code":"var _jsxFileName = \"/home/muhibullahkamali/GitHub/React-Diaries-App/src/Features/auth/Auth.tsx\";\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as Yup from 'yup';\nimport http from '../../Services/api/api';\nimport { saveToken, setAuthState } from './AuthSlice';\nimport { setUser } from './UserSlice';\nimport { useAppDispatch } from '../../store';\nconst schema = Yup.object().shape({\n  username: Yup.string().required('What? No username?').max(16, 'Username cannot be longer than 16 characters'),\n  password: Yup.string().required('Without a password, \"None shall pass!\"'),\n  email: Yup.string().email('Please provide a valid email address (abc@xy.z)')\n});\n\nconst Auth = () => {\n  const {\n    handleSubmit,\n    register,\n    errors\n  } = useForm();\n  const [isLogin, setIsLogin] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const dispatch = useAppDispatch();\n\n  const submitForm = data => {\n    const path = isLogin ? '/auth/login' : '/auth/signup';\n    http.post(path, data).then(res => {\n      if (res) {\n        const {\n          user,\n          token\n        } = res;\n        dispatch(saveToken(token));\n        dispatch(setUser(user));\n        dispatch(setAuthState(true));\n      }\n    }).catch(error => {\n      console.log(error);\n    }).finally(() => {\n      setLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(submitForm),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: register,\n    name: \"username\",\n    placeholder: \"Username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 25\n    }\n  }), errors && errors.username && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 29\n    }\n  }, errors.username.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: register,\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  }), errors && errors.password && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, errors.password.message)), !isLogin && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: register,\n    name: \"email\",\n    placeholder: \"Email (optional)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }), errors && errors.email && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 33\n    }\n  }, errors.email.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, isLogin ? 'Login' : 'Create account')), /*#__PURE__*/React.createElement(\"p\", {\n    onClick: () => setIsLogin(!isLogin),\n    style: {\n      cursor: 'pointer',\n      opacity: 0.7\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, isLogin ? 'No account? Create one' : 'Already have an account?'))));\n};\n\nexport default Auth;","map":{"version":3,"sources":["/home/muhibullahkamali/GitHub/React-Diaries-App/src/Features/auth/Auth.tsx"],"names":["React","useState","useForm","Yup","http","saveToken","setAuthState","setUser","useAppDispatch","schema","object","shape","username","string","required","max","password","email","Auth","handleSubmit","register","errors","isLogin","setIsLogin","loading","setLoading","dispatch","submitForm","data","path","post","then","res","user","token","catch","error","console","log","finally","message","cursor","opacity"],"mappings":"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","sourcesContent":["import React, { FC, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { User } from '../../Interfaces/user.interface';\nimport * as Yup from 'yup';\nimport http from '../../Services/api/api';\nimport { saveToken, setAuthState } from './AuthSlice';\nimport { setUser } from './UserSlice';\nimport { AuthResponse } from '../../Services/mirage/routes/user';\nimport { useAppDispatch } from '../../store';\n\nconst schema = Yup.object().shape({\n    username: Yup.string()\n        .required('What? No username?')\n        .max(16, 'Username cannot be longer than 16 characters'),\n    password: Yup.string().required('Without a password, \"None shall pass!\"'),\n    email: Yup.string().email('Please provide a valid email address (abc@xy.z)'),\n});\n\nconst Auth: FC = () => {\n    const { handleSubmit, register, errors } = useForm<User>();\n    const [isLogin, setIsLogin] = useState(true);\n    const [loading, setLoading] = useState(false);\n    const dispatch = useAppDispatch();\n\n    const submitForm = (data: User) => {\n        const path = isLogin ? '/auth/login' : '/auth/signup';\n        http\n            .post<User, AuthResponse>(path, data)\n            .then((res) => {\n                if (res) {\n                    const { user, token } = res;\n                    dispatch(saveToken(token));\n                    dispatch(setUser(user));\n                    dispatch(setAuthState(true));\n                }\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n            .finally(() => {\n                setLoading(false);\n            });\n    };\n\n    return (\n        <div className=\"auth\">\n            <div className=\"card\">\n                <form onSubmit={handleSubmit(submitForm)}>\n                    <div className=\"inputWrapper\">\n                        <input ref={register} name=\"username\" placeholder=\"Username\" />\n                        {errors && errors.username && (\n                            <p className=\"error\">{errors.username.message}</p>\n                        )}\n                    </div>\n                    <div className=\"inputWrapper\">\n                        <input\n                            ref={register}\n                            name=\"password\"\n                            type=\"password\"\n                            placeholder=\"Password\"\n                        />\n                        {errors && errors.password && (\n                            <p className=\"error\">{errors.password.message}</p>\n                        )}\n                    </div>\n                    {!isLogin && (\n                        <div className=\"inputWrapper\">\n                            <input\n                                ref={register}\n                                name=\"email\"\n                                placeholder=\"Email (optional)\"\n                            />\n                            {errors && errors.email && (\n                                <p className=\"error\">{errors.email.message}</p>\n                            )}\n                        </div>\n                    )}\n                    <div className=\"inputWrapper\">\n                        <button type=\"submit\" disabled={loading}>\n                            {isLogin ? 'Login' : 'Create account'}\n                        </button>\n                    </div>\n                    <p\n                        onClick={() => setIsLogin(!isLogin)}\n                        style={{ cursor: 'pointer', opacity: 0.7 }}\n                    >\n                        {isLogin ? 'No account? Create one' : 'Already have an account?'}\n                    </p>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default Auth;"]},"metadata":{},"sourceType":"module"}